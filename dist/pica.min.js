/* pica 1.0.8 nodeca/pica */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.pica=t()}}(function(){return function t(r,e,n){function i(a,u){if(!e[a]){if(!r[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var h=e[a]={exports:{}};r[a][0].call(h.exports,function(t){var e=r[a][1][t];return i(e?e:t)},h,h.exports,t,r,e,n)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,r,e){"use strict";function n(t){return 0>t?0:t>255?255:t}function i(t){return Math.floor(t*l)}function o(t,r,e){var n,o,a,u,f,s,h,d,l,p,w,v,g,y,m,M,b,x=c[t].filter,A=e/r,q=1/A,k=Math.min(1,A),z=c[t].win/k,R=Math.floor(2*(z+1)),U=new Int16Array((R+2)*e),W=0;for(n=0;e>n;n++){for(o=(n+.5)*q,a=Math.max(0,Math.floor(o-z)),u=Math.min(r-1,Math.ceil(o+z)),f=u-a+1,s=new Float32Array(f),h=new Int16Array(f),d=0,p=a,w=0;u>=p;p++,w++)v=x((p+.5-o)*k),d+=v,s[w]=v;for(l=0,w=0;w<s.length;w++)g=i(s[w]/d),l+=g,h[w]=g;for(h[e>>1]+=i(1)-l,y=0;y<h.length&&0===h[y];)y++;if(y<h.length){for(m=h.length-1;m>0&&0===h[m];)m--;M=a+y,b=m-y+1,U[W++]=M,U[W++]=b,U.set(h.subarray(y,m+1),W),W+=b}else U[W++]=0,U[W++]=0}return U}function a(t,r,e,i,o,a){var u,f,s,h,d,l,c,p,w,v,g,y=0,m=0;for(w=0;i>w;w++){for(d=0,v=0;o>v;v++){for(l=a[d++],c=a[d++],p=y+4*l|0,u=f=s=h=0;c>0;c--)g=a[d++],h=h+g*t[p+3]|0,s=s+g*t[p+2]|0,f=f+g*t[p+1]|0,u=u+g*t[p]|0,p=p+4|0;r[m+3]=n(h+8192>>14),r[m+2]=n(s+8192>>14),r[m+1]=n(f+8192>>14),r[m]=n(u+8192>>14),m=m+4*i|0}m=4*(w+1)|0,y=(w+1)*e*4|0}}function u(t,r,e,i,o,a){var u,f,s,h,d,l,c,p,w,v,g,y=0,m=0;for(w=0;i>w;w++){for(d=0,v=0;o>v;v++){for(l=a[d++],c=a[d++],p=y+4*l|0,u=f=s=h=0;c>0;c--)g=a[d++],h=h+g*t[p+3]|0,s=s+g*t[p+2]|0,f=f+g*t[p+1]|0,u=u+g*t[p]|0,p=p+4|0;r[m+3]=n(h+8192>>14),r[m+2]=n(s+8192>>14),r[m+1]=n(f+8192>>14),r[m]=n(u+8192>>14),m=m+4*i|0}m=4*(w+1)|0,y=(w+1)*e*4|0}}function f(t,r,e){for(var n=3,i=r*e*4|0;i>n;)t[n]=255,n=n+4|0}function s(t){var r=t.src,e=t.width,n=t.height,i=t.toWidth,s=t.toHeight,d=t.dest||new Uint8Array(i*s*4),l="undefined"==typeof t.quality?3:t.quality,c=t.alpha||!1,p="undefined"==typeof t.unsharpAmount?0:0|t.unsharpAmount,w="undefined"==typeof t.unsharpRadius?0:t.unsharpRadius,v="undefined"==typeof t.unsharpThreshold?0:0|t.unsharpThreshold;if(1>e||1>n||1>i||1>s)return[];var g=o(l,e,i),y=o(l,n,s),m=new Uint8Array(i*n*4);return a(r,m,e,n,i,g),u(m,d,n,i,s,y),c||f(d,i,s),p&&h(d,i,s,p,w,v),d}var h=t("./unsharp"),d=14,l=1<<d,c=[{win:.5,filter:function(t){return t>=-.5&&.5>t?1:0}},{win:1,filter:function(t){if(-1>=t||t>=1)return 0;if(t>-1.1920929e-7&&1.1920929e-7>t)return 1;var r=t*Math.PI;return Math.sin(r)/r*(.54+.46*Math.cos(r/1))}},{win:2,filter:function(t){if(-2>=t||t>=2)return 0;if(t>-1.1920929e-7&&1.1920929e-7>t)return 1;var r=t*Math.PI;return Math.sin(r)/r*Math.sin(r/2)/(r/2)}},{win:3,filter:function(t){if(-3>=t||t>=3)return 0;if(t>-1.1920929e-7&&1.1920929e-7>t)return 1;var r=t*Math.PI;return Math.sin(r)/r*Math.sin(r/3)/(r/3)}}];r.exports=s},{"./unsharp":2}],2:[function(t,r,e){"use strict";function n(t,r,e){for(var n,i,o,a,u,f=r*e,s=new Uint16Array(f),h=0;f>h;h++)n=t[4*h],i=t[4*h+1],o=t[4*h+2],u=n>=i&&n>=o?n:i>=o&&i>=n?i:o,a=i>=n&&o>=n?n:o>=i&&n>=i?i:o,s[h]=257*(u+a)>>1;return s}function i(t,r,e,i,a,u){var f,s,h,d,l,c,p,w,v,g,y,m,M;if(0!==i){var b=n(t,r,e),x=b.slice();o(x,r,e,a);for(var A=i/100*4096+.5|0,q=257*u|0,k=r*e,z=0;k>z;z++)m=2*(b[z]-x[z]),Math.abs(m)>=q&&(M=4*z,f=t[M],s=t[M+1],h=t[M+2],w=f>=s&&f>=h?f:s>=f&&s>=h?s:h,p=s>=f&&h>=f?f:f>=s&&h>=s?s:h,c=257*(w+p)>>1,p===w?d=l=0:(l=32767>=c?4095*(w-p)/(w+p)|0:4095*(w-p)/(510-w-p)|0,d=f===w?65535*(s-h)/(6*(w-p))|0:s===w?21845+(65535*(h-f)/(6*(w-p))|0):43690+(65535*(f-s)/(6*(w-p))|0)),c+=A*m+2048>>12,c>65535?c=65535:0>c&&(c=0),0===l?f=s=h=c>>8:(g=32767>=c?c*(4096+l)+2048>>12:c+((65535-c)*l+2048>>12),v=2*c-g>>8,g>>=8,y=d+21845&65535,f=y>=43690?v:y>=32767?v+(6*(g-v)*(43690-y)+32768>>16):y>=10922?g:v+(6*(g-v)*y+32768>>16),y=65535&d,s=y>=43690?v:y>=32767?v+(6*(g-v)*(43690-y)+32768>>16):y>=10922?g:v+(6*(g-v)*y+32768>>16),y=d-21845&65535,h=y>=43690?v:y>=32767?v+(6*(g-v)*(43690-y)+32768>>16):y>=10922?g:v+(6*(g-v)*y+32768>>16)),t[M]=f,t[M+1]=s,t[M+2]=h)}}var o=t("glur/mono16");r.exports=i},{"glur/mono16":5}],3:[function(t,r,e){"use strict";var n=t("./pure/resize");r.exports=function(t,r){var e=n(t);r(null,e)}},{"./pure/resize":1}],4:[function(t,r,e){"use strict";r.exports=function(r){var e=t("./resize");r.onmessage=function(t){e(t.data,function(t,e){return t?void r.postMessage({err:t}):void r.postMessage({output:e},[e.buffer])})}}},{"./resize":3}],5:[function(t,r,e){function n(t){return 0>t?0:t>65535?65535:t}var i=function(t){var r=t*t;r=1/(r*r);var e=r*(t*(t*(1.1442707*t+.0130625)-.750091)+.254673),n=r*(t*(t*(1.364287*t+.0088755)-.325534)+.301621),i=r*(t*(t*(1.2397166*t-1644e-7)-.636358)-.0536068),o=Math.exp(e),a=o*Math.cos(n),u=Math.exp(i),f=o*o,s=1/(u*f),h=(f+2*a*u)*s,d=-(2*a+u)*s,l=1-(h+d+s);return new Float32Array([l,h,d,s])},o=function(t,r,e,i,o,a){var u,f,s,h,d,l,c,p,w,v=i[0],g=i[1],y=i[2],m=i[3];for(f=0;a>f;f++){for(h=f*o,l=t[h],c=l,p=c,w=p,d=0,u=0;o>u;u++)l=t[h],h++,l=v*l+(g*c+y*p+m*w),w=p,p=c,c=l,e[d]=l,d++;for(c=l,p=c,w=p,s=f+a*o,u=o-1;u>=0;u--)d--,l=e[d],l=v*l+(g*c+y*p+m*w),w=p,p=c,c=l,s-=a,r[s]=n(l+.5|0)}},a=function(t,r,e,n){if(n){var a=new Uint16Array(t.length),u=new Float32Array(r),f=i(n);o(t,a,u,f,r,e,n),o(a,t,u,f,e,r,n)}};r.exports=a},{}],6:[function(t,r,e){var n=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;r.exports=function(t){for(var r,e=Object.keys(o),u=0,f=e.length;f>u;u++){var s=e[u];if(o[s].exports===t){r=s;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},u=0,f=e.length;f>u;u++){var s=e[u];h[s]=s}i[r]=[Function(["require","module","exports"],"("+t+")(self)"),h]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),l={};l[r]=r,i[d]=[Function(["require"],"require("+a(r)+")(self)"),l];var c="("+n+")({"+Object.keys(i).map(function(t){return a(t)+":["+i[t][0]+","+a(i[t][1])+"]"}).join(",")+"},{},["+a(d)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(p.createObjectURL(new Blob([c],{type:"text/javascript"})))}},{}],"/":[function(t,r,e){"use strict";function n(t){return Object.prototype.toString.call(t)}function i(t){return"[object Function]"===n(t)}function o(r,n){var i,o={src:r.src,dest:null,width:0|r.width,height:0|r.height,toWidth:0|r.toWidth,toHeight:0|r.toHeight,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold};return u&&e.WW?(i=t("webworkify")(d),i.onmessage=function(t){var e,o,a=r.dest,u=t.data.output;if(a)if(a.set)a.set(u);else for(e=0,o=u.length;o>e;e++)a[e]=u[e];n(t.data.err,u),i.terminate()},r.transferable?i.postMessage(o,[r.src.buffer]):i.postMessage(o),i):(o.dest=r.dest,h(o,n),null)}function a(t,r,e,n){var a=t.width,u=t.height,f=r.width,s=r.height;i(e)&&(n=e,e={}),isNaN(e)||(e={quality:e,alpha:!1});var h=r.getContext("2d"),d=h.getImageData(0,0,f,s),l={src:t.getContext("2d").getImageData(0,0,a,u).data,dest:d.data,width:t.width,height:t.height,toWidth:r.width,toHeight:r.height,quality:e.quality,alpha:e.alpha,unsharpAmount:e.unsharpAmount,unsharpRadius:e.unsharpRadius,unsharpThreshold:e.unsharpThreshold,transferable:!0};return o(l,function(t){return t?void n(t):(h.putImageData(d,0,0),void n())})}var u="undefined"!=typeof window&&"Worker"in window;if(u)try{var f=t("webworkify")(function(){});f.terminate()}catch(s){u=!1}var h=t("./lib/resize"),d=t("./lib/resize_worker");e.resizeBuffer=o,e.resizeCanvas=a,e.WW=u},{"./lib/resize":3,"./lib/resize_worker":4,webworkify:6}]},{},[])("/")});
